<mxfile host="app.diagrams.net" modified="2025-11-16T00:00:00.000Z" agent="Claude Code" version="24.0.0">
  <diagram name="AWS E-Commerce Architecture" id="aws-ecommerce">
    <mxGraphModel dx="2000" dy="1600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1600" background="#ffffff">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="AWS E-Commerce Architecture - Multi-Layer Design" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="600" y="10" width="800" height="30" as="geometry"/>
        </mxCell>

        <!-- Region Label -->
        <mxCell id="region" value="Region: eu-central-1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="180" width="200" height="20" as="geometry"/>
        </mxCell>

        <!-- ========== LAYER 1: EDGE & CDN (Top Panel) ========== -->

        <!-- Edge Layer Container -->
        <mxCell id="edge-container" value="EDGE &amp; CDN LAYER" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;strokeWidth=2;fontSize=16;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="50" width="1520" height="120" as="geometry"/>
        </mxCell>

        <!-- Users/Internet -->
        <mxCell id="internet" value="Users&#xa;(Internet)" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;strokeWidth=2;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="70" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- Route 53 -->
        <mxCell id="route53" value="Route 53&#xa;DNS" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.route_53;" vertex="1" parent="1">
          <mxGeometry x="280" y="75" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- CloudFront -->
        <mxCell id="cloudfront" value="CloudFront&#xa;CDN Distribution" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudfront;" vertex="1" parent="1">
          <mxGeometry x="420" y="75" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- WAF -->
        <mxCell id="waf" value="AWS WAF&#xa;Web Application&#xa;Firewall" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.waf;" vertex="1" parent="1">
          <mxGeometry x="580" y="75" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ACM Certificate -->
        <mxCell id="acm-edge" value="ACM&#xa;SSL/TLS Cert" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.certificate_manager_3;" vertex="1" parent="1">
          <mxGeometry x="420" y="100" width="30" height="30" as="geometry"/>
        </mxCell>

        <!-- Edge Connections -->
        <mxCell id="edge1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="internet" target="route53">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edge2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="route53" target="cloudfront">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edge3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="cloudfront" target="waf">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ========== LAYER 2: CORE INFRASTRUCTURE (Main Area) ========== -->

        <!-- VPC Container -->
        <mxCell id="vpc" value="VPC: 10.0.0.0/16" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=14;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;strokeColor=#3F8624;fillColor=#E8F5E9;verticalAlign=top;align=left;spacingLeft=30;fontColor=#3F8624;dashed=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="210" width="1520" height="950" as="geometry"/>
        </mxCell>

        <!-- Internet Gateway -->
        <mxCell id="igw" value="Internet&#xa;Gateway" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.internet_gateway;" vertex="1" parent="vpc">
          <mxGeometry x="700" y="10" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- Application Load Balancer -->
        <mxCell id="alb" value="Application&#xa;Load Balancer&#xa;(Public)" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D86613;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.application_load_balancer;" vertex="1" parent="vpc">
          <mxGeometry x="700" y="110" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ========== AVAILABILITY ZONE 1 ========== -->

        <!-- AZ1 Container -->
        <mxCell id="az1" value="Availability Zone: eu-central-1a" style="fillColor=#FFF8DC;strokeColor=#FF8C00;dashed=1;verticalAlign=top;fontStyle=1;fontSize=12;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="vpc">
          <mxGeometry x="40" y="200" width="680" height="720" as="geometry"/>
        </mxCell>

        <!-- AZ1 Public Subnet -->
        <mxCell id="az1-public" value="Public Subnet&#xa;10.0.1.0/24" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#E6F7F7;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="az1">
          <mxGeometry x="20" y="30" width="640" height="120" as="geometry"/>
        </mxCell>

        <!-- NAT Gateway AZ1 -->
        <mxCell id="nat1" value="NAT&#xa;Gateway" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;" vertex="1" parent="az1-public">
          <mxGeometry x="500" y="35" width="50" height="50" as="geometry"/>
        </mxCell>

        <!-- AZ1 Private App Subnet -->
        <mxCell id="az1-app" value="Private App Subnet&#xa;10.0.16.0/20" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#F0F8FF;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="az1">
          <mxGeometry x="20" y="170" width="640" height="340" as="geometry"/>
        </mxCell>

        <!-- Auto Scaling Group Label AZ1 -->
        <mxCell id="asg1-label" value="Auto Scaling Group (AZ1)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="az1-app">
          <mxGeometry x="180" y="10" width="160" height="20" as="geometry"/>
        </mxCell>

        <!-- EC2 Instance 1 -->
        <mxCell id="ec2-1" value="EC2&#xa;Web Server 1&#xa;t3.medium" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D86613;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" vertex="1" parent="az1-app">
          <mxGeometry x="100" y="60" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- EC2 Instance 2 -->
        <mxCell id="ec2-2" value="EC2&#xa;Web Server 2&#xa;t3.medium" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D86613;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" vertex="1" parent="az1-app">
          <mxGeometry x="220" y="60" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ElastiCache Node 1 -->
        <mxCell id="cache1" value="ElastiCache&#xa;Redis Node 1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E73B8;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.elasticache;" vertex="1" parent="az1-app">
          <mxGeometry x="400" y="80" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- EFS Mount Target 1 -->
        <mxCell id="efs-mount1" value="EFS&#xa;Mount Target" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.efs_standard;" vertex="1" parent="az1-app">
          <mxGeometry x="160" y="200" width="40" height="40" as="geometry"/>
        </mxCell>

        <!-- AZ1 Private DB Subnet -->
        <mxCell id="az1-db" value="Private DB Subnet&#xa;10.0.32.0/24" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#FFF5F5;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="az1">
          <mxGeometry x="20" y="530" width="640" height="170" as="geometry"/>
        </mxCell>

        <!-- RDS Primary -->
        <mxCell id="rds-primary" value="RDS PostgreSQL&#xa;Primary Instance&#xa;db.t3.large&#xa;500 GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E73B8;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.rds_postgresql_instance;" vertex="1" parent="az1-db">
          <mxGeometry x="260" y="50" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ========== AVAILABILITY ZONE 2 ========== -->

        <!-- AZ2 Container -->
        <mxCell id="az2" value="Availability Zone: eu-central-1b" style="fillColor=#FFF8DC;strokeColor=#FF8C00;dashed=1;verticalAlign=top;fontStyle=1;fontSize=12;whiteSpace=wrap;html=1;strokeWidth=2;" vertex="1" parent="vpc">
          <mxGeometry x="760" y="200" width="680" height="720" as="geometry"/>
        </mxCell>

        <!-- AZ2 Public Subnet -->
        <mxCell id="az2-public" value="Public Subnet&#xa;10.0.2.0/24" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#E6F7F7;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="az2">
          <mxGeometry x="20" y="30" width="640" height="120" as="geometry"/>
        </mxCell>

        <!-- NAT Gateway AZ2 -->
        <mxCell id="nat2" value="NAT&#xa;Gateway" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;" vertex="1" parent="az2-public">
          <mxGeometry x="90" y="35" width="50" height="50" as="geometry"/>
        </mxCell>

        <!-- AZ2 Private App Subnet -->
        <mxCell id="az2-app" value="Private App Subnet&#xa;10.0.20.0/20" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#F0F8FF;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="az2">
          <mxGeometry x="20" y="170" width="640" height="340" as="geometry"/>
        </mxCell>

        <!-- Auto Scaling Group Label AZ2 -->
        <mxCell id="asg2-label" value="Auto Scaling Group (AZ2)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="az2-app">
          <mxGeometry x="240" y="10" width="160" height="20" as="geometry"/>
        </mxCell>

        <!-- EC2 Instance 3 -->
        <mxCell id="ec2-3" value="EC2&#xa;Web Server 3&#xa;t3.medium" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D86613;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" vertex="1" parent="az2-app">
          <mxGeometry x="340" y="60" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- EC2 Instance 4 -->
        <mxCell id="ec2-4" value="EC2&#xa;Web Server 4&#xa;t3.medium" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#D86613;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" vertex="1" parent="az2-app">
          <mxGeometry x="460" y="60" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ElastiCache Node 2 -->
        <mxCell id="cache2" value="ElastiCache&#xa;Redis Node 2" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E73B8;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.elasticache;" vertex="1" parent="az2-app">
          <mxGeometry x="180" y="80" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- EFS Mount Target 2 -->
        <mxCell id="efs-mount2" value="EFS&#xa;Mount Target" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.efs_standard;" vertex="1" parent="az2-app">
          <mxGeometry x="420" y="200" width="40" height="40" as="geometry"/>
        </mxCell>

        <!-- AZ2 Private DB Subnet -->
        <mxCell id="az2-db" value="Private DB Subnet&#xa;10.0.33.0/24" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#FFF5F5;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="az2">
          <mxGeometry x="20" y="530" width="640" height="170" as="geometry"/>
        </mxCell>

        <!-- RDS Standby -->
        <mxCell id="rds-standby" value="RDS PostgreSQL&#xa;Standby Instance&#xa;(Multi-AZ)&#xa;500 GB" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E73B8;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.rds_postgresql_instance;opacity=70;" vertex="1" parent="az2-db">
          <mxGeometry x="260" y="50" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ========== LAYER 3: OBSERVABILITY (Right Panel) ========== -->

        <!-- Observability Container -->
        <mxCell id="obs-container" value="OBSERVABILITY &amp; MONITORING" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#9C27B0;strokeWidth=2;fontSize=14;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="1600" y="210" width="360" height="480" as="geometry"/>
        </mxCell>

        <!-- CloudWatch -->
        <mxCell id="cloudwatch" value="CloudWatch&#xa;Metrics, Logs&#xa;Alarms" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch;" vertex="1" parent="1">
          <mxGeometry x="1660" y="250" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- X-Ray -->
        <mxCell id="xray" value="X-Ray&#xa;Distributed&#xa;Tracing" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.x_ray;" vertex="1" parent="1">
          <mxGeometry x="1660" y="360" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- CloudTrail -->
        <mxCell id="cloudtrail" value="CloudTrail&#xa;Audit Logs&#xa;Compliance" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudtrail;" vertex="1" parent="1">
          <mxGeometry x="1660" y="470" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- SNS -->
        <mxCell id="sns" value="SNS Topic&#xa;Alert&#xa;Notifications" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.sns;" vertex="1" parent="1">
          <mxGeometry x="1660" y="580" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- Monitoring Info -->
        <mxCell id="mon-info" value="Monitors:&#xa;• ALB metrics&#xa;• EC2 CPU/Memory&#xa;• RDS performance&#xa;• Cache hit ratio&#xa;• API latency&#xa;• Error rates&#xa;&#xa;Traces:&#xa;• Request flow&#xa;• DB queries&#xa;• Cache access" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1780" y="250" width="160" height="200" as="geometry"/>
        </mxCell>

        <!-- ========== LAYER 4: SECURITY (Right Panel Bottom) ========== -->

        <!-- Security Container -->
        <mxCell id="sec-container" value="SECURITY SERVICES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#DD344C;strokeWidth=2;fontSize=14;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="1600" y="720" width="360" height="440" as="geometry"/>
        </mxCell>

        <!-- KMS -->
        <mxCell id="kms" value="AWS KMS&#xa;Encryption Keys" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.key_management_service;" vertex="1" parent="1">
          <mxGeometry x="1660" y="760" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- Secrets Manager -->
        <mxCell id="secrets" value="Secrets Manager&#xa;DB Credentials&#xa;API Keys" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.secrets_manager;" vertex="1" parent="1">
          <mxGeometry x="1660" y="870" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- ACM -->
        <mxCell id="acm" value="Certificate&#xa;Manager&#xa;SSL/TLS Certs" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.certificate_manager_3;" vertex="1" parent="1">
          <mxGeometry x="1660" y="980" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- GuardDuty -->
        <mxCell id="guardduty" value="GuardDuty&#xa;Threat Detection&#xa;VPC Flow Logs" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.guardduty;" vertex="1" parent="1">
          <mxGeometry x="1660" y="1080" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- Security Info -->
        <mxCell id="sec-info" value="Encrypts:&#xa;• RDS data at rest&#xa;• S3 objects&#xa;• EFS volumes&#xa;• EBS snapshots&#xa;&#xa;Protects:&#xa;• DB passwords&#xa;• API credentials&#xa;• Certificate keys&#xa;&#xa;Monitors:&#xa;• Threats&#xa;• Breaches&#xa;• Anomalies" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1780" y="760" width="160" height="240" as="geometry"/>
        </mxCell>

        <!-- ========== LAYER 5: STORAGE (Bottom Panel) ========== -->

        <!-- Storage Container -->
        <mxCell id="storage-container" value="STORAGE &amp; CACHING LAYER" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#4CAF50;strokeWidth=2;fontSize=16;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="1200" width="1520" height="360" as="geometry"/>
        </mxCell>

        <!-- S3 Bucket 1: Product Images -->
        <mxCell id="s3-products" value="S3 Bucket&#xa;Product Images&#xa;Versioned&#xa;KMS Encrypted" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="140" y="1260" width="80" height="80" as="geometry"/>
        </mxCell>

        <!-- S3 Bucket 2: User Uploads -->
        <mxCell id="s3-uploads" value="S3 Bucket&#xa;User Uploads&#xa;Reviews, Photos&#xa;KMS Encrypted" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="340" y="1260" width="80" height="80" as="geometry"/>
        </mxCell>

        <!-- S3 Bucket 3: Backups -->
        <mxCell id="s3-backups" value="S3 Bucket&#xa;Backups &amp; Logs&#xa;Lifecycle Policy&#xa;KMS Encrypted" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.s3;" vertex="1" parent="1">
          <mxGeometry x="540" y="1260" width="80" height="80" as="geometry"/>
        </mxCell>

        <!-- EFS -->
        <mxCell id="efs" value="Elastic File System&#xa;Shared Storage&#xa;Multi-AZ&#xa;KMS Encrypted" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.efs;" vertex="1" parent="1">
          <mxGeometry x="780" y="1260" width="80" height="80" as="geometry"/>
        </mxCell>

        <!-- ElastiCache Cluster Info -->
        <mxCell id="cache-cluster" value="ElastiCache Redis Cluster&#xa;cache.t3.medium&#xa;Multi-AZ with Replication&#xa;&#xa;Caches:&#xa;• Session data&#xa;• Product catalog&#xa;• User preferences&#xa;• Frequent queries" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#2E73B8;strokeWidth=2;fontSize=11;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="1020" y="1240" width="280" height="140" as="geometry"/>
        </mxCell>

        <!-- Storage Details -->
        <mxCell id="storage-details" value="S3 Features:&#xa;• Server-side encryption (SSE-KMS)&#xa;• Versioning enabled&#xa;• Lifecycle policies (archive to Glacier)&#xa;• CloudFront origin for product images&#xa;• Cross-region replication for backups&#xa;&#xa;EFS Features:&#xa;• General Purpose performance mode&#xa;• Bursting throughput mode&#xa;• Automatic backups enabled&#xa;• Mounted across all EC2 instances" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="140" y="1390" width="500" height="140" as="geometry"/>
        </mxCell>

        <!-- ========== CONNECTIONS ========== -->

        <!-- WAF to ALB -->
        <mxCell id="conn-waf-alb" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="waf" target="alb">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="610" y="180" as="sourcePoint"/>
            <mxPoint x="770" y="310" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- IGW to ALB -->
        <mxCell id="conn-igw-alb" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="igw" target="alb">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ALB to EC2-1 -->
        <mxCell id="conn-alb-ec2-1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="alb" target="ec2-1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ALB to EC2-2 -->
        <mxCell id="conn-alb-ec2-2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="alb" target="ec2-2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ALB to EC2-3 -->
        <mxCell id="conn-alb-ec2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="alb" target="ec2-3">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ALB to EC2-4 -->
        <mxCell id="conn-alb-ec2-4" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="alb" target="ec2-4">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2-1 to RDS Primary -->
        <mxCell id="conn-ec2-1-rds" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2E73B8;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-1" target="rds-primary">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2-2 to RDS Primary -->
        <mxCell id="conn-ec2-2-rds" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2E73B8;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-2" target="rds-primary">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2-3 to RDS Primary -->
        <mxCell id="conn-ec2-3-rds" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2E73B8;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-3" target="rds-primary">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2-4 to RDS Primary -->
        <mxCell id="conn-ec2-4-rds" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2E73B8;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-4" target="rds-primary">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- RDS Replication -->
        <mxCell id="conn-rds-repl" value="Synchronous&#xa;Replication" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2E73B8;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="rds-primary" target="rds-standby">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2 to ElastiCache -->
        <mxCell id="conn-ec2-1-cache" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#00BCD4;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-1" target="cache1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-ec2-3-cache" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#00BCD4;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-3" target="cache2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2 to S3 -->
        <mxCell id="conn-ec2-s3-products" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=1.5;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ec2-1" target="s3-products">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="190" y="670"/>
              <mxPoint x="180" y="670"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-ec2-s3-uploads" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=1.5;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ec2-2" target="s3-uploads">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="310" y="670"/>
              <mxPoint x="380" y="670"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- CloudFront to S3 -->
        <mxCell id="conn-cf-s3" value="Origin" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=2;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="cloudfront" target="s3-products">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="180"/>
              <mxPoint x="180" y="180"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- RDS to S3 Backups -->
        <mxCell id="conn-rds-s3" value="Automated&#xa;Backups" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2E73B8;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="rds-primary" target="s3-backups">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EC2 to EFS -->
        <mxCell id="conn-ec2-efs-1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-1" target="efs-mount1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-ec2-efs-2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-3" target="efs-mount2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EFS Mount to EFS -->
        <mxCell id="conn-mount-efs-1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=1.5;endArrow=classic;endFill=1;" edge="1" parent="1" source="efs-mount1" target="efs">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-mount-efs-2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#277116;strokeWidth=1.5;endArrow=classic;endFill=1;" edge="1" parent="1" source="efs-mount2" target="efs">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- CloudWatch Monitoring Connections -->
        <mxCell id="conn-cw-alb" value="Metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="alb" target="cloudwatch">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-cw-ec2" value="Metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="ec2-2" target="cloudwatch">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-cw-rds" value="Metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="rds-primary" target="cloudwatch">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- X-Ray Tracing -->
        <mxCell id="conn-xray-alb" value="Traces" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="alb" target="xray">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-xray-ec2" value="Traces" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="ec2-3" target="xray">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- CloudWatch to SNS -->
        <mxCell id="conn-cw-sns" value="Alarms" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=2;endArrow=classic;endFill=1;" edge="1" parent="1" source="cloudwatch" target="sns">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- KMS Encryption Connections -->
        <mxCell id="conn-kms-rds" value="Encrypts" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#DD344C;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="kms" target="rds-primary">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-kms-s3" value="Encrypts" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#DD344C;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="kms" target="s3-backups">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1690" y="1300"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-kms-efs" value="Encrypts" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#DD344C;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="kms" target="efs">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1690" y="1300"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Secrets Manager to EC2 -->
        <mxCell id="conn-secrets-ec2" value="DB Creds" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#DD344C;strokeWidth=1.5;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="secrets" target="ec2-2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- GuardDuty Monitoring -->
        <mxCell id="conn-guard-vpc" value="Monitors" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#DD344C;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;dashPattern=4 4;" edge="1" parent="1" source="guardduty" target="vpc">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- CloudTrail to S3 -->
        <mxCell id="conn-trail-s3" value="Audit Logs" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#C925D1;strokeWidth=1.5;endArrow=classic;endFill=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="cloudtrail" target="s3-backups">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1690" y="1300"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- NAT Gateway Connections -->
        <mxCell id="conn-nat1-igw" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3F8624;strokeWidth=1.5;endArrow=classic;endFill=1;" edge="1" parent="1" source="nat1" target="igw">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-nat2-igw" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3F8624;strokeWidth=1.5;endArrow=classic;endFill=1;" edge="1" parent="1" source="nat2" target="igw">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-ec2-nat1" value="Outbound" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3F8624;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-1" target="nat1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="conn-ec2-nat2" value="Outbound" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3F8624;strokeWidth=1;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="ec2-3" target="nat2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ========== LEGEND ========== -->

        <!-- Legend Container -->
        <mxCell id="legend-container" value="LEGEND" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#000000;strokeWidth=2;fontSize=14;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="1600" y="50" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Legend Items -->
        <mxCell id="legend-1" value="━━━  Solid: Primary data flow" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1620" y="75" width="200" height="15" as="geometry"/>
        </mxCell>

        <mxCell id="legend-2" value="- - - -  Dashed: Communication/Query" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1620" y="95" width="220" height="15" as="geometry"/>
        </mxCell>

        <mxCell id="legend-3" value="⬤ Green: Network/VPC components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1620" y="115" width="220" height="15" as="geometry"/>
        </mxCell>

        <mxCell id="legend-4" value="⬤ Orange: Compute (EC2, ALB)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1620" y="135" width="220" height="15" as="geometry"/>
        </mxCell>

        <!-- Auto Scaling Note -->
        <mxCell id="asg-note" value="Auto Scaling: 2-8 instances&#xa;Scales based on CPU &gt; 70%" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=1;fontSize=10;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="700" y="650" width="180" height="40" as="geometry"/>
        </mxCell>

        <!-- Security Group Labels -->
        <mxCell id="sg-alb-label" value="Security Group: Allow 443 from CloudFront" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="640" y="380" width="180" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="sg-ec2-label" value="Security Group: Allow 80/443 from ALB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="400" y="550" width="200" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="sg-rds-label" value="Security Group: Allow 5432 from App tier only" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="600" y="1100" width="240" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
